<div class="container">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Họ và tên</th>
                    <th>SBD</th>
                    <th>Điểm</th>
                </tr>
            </thead>
            <tbody>
                {{#each students}}
                <tr>
                    <td><a href="/essays/student/{{this.id}}/exam/{{this.examId}}">{{this.name}}</a></td>
                    <td>SBD: {{this.sbd}}</td>
                    <td>{{this.diem}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
    <div class="info-box">
        <h3>Đề thi cuối kỳ</h3>
        <ul>
            <li>2 câu hỏi</li>
            <li>Physic</li>
            <li>90 phút</li>
            <li>16h-20/5/2024</li>
            <li>40</li>
        </ul>
        <button class="button" id="auto-grade">Chấm tự động</button>
        <h4>Nhận xét:</h4>
        <textarea></textarea>
        <button class="button">Hoàn Thành</button>
    </div>
</div>

<script>
    document.getElementById('auto-grade').addEventListener('click', function() {
        fetch('/examresultcriteria/result/' + examResultId, {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token // Add your token handling logic here
            }
        })
        .then(response => response.json())
        .then(data => {
            // Assuming `data` contains the score
            document.querySelectorAll('tbody tr').forEach((row, index) => {
                row.cells[2].innerText = data.scores[index];
            });
        })
        .catch(error => console.error('Error:', error));
    });
</script>